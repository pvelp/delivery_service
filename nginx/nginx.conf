upstream config {
    server web:8000;
}

 server {

     listen 80;

     location / {
         proxy_pass http://config;
         proxy_connect_timeout 180s;
         proxy_read_timeout 180s;
         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
         proxy_set_header Host $http_host;
         proxy_redirect off;
         client_max_body_size 20M ;
     }

     location /static/ {
         alias /home/app/web/staticfiles/;
     }

     location /media/ {
         alias /home/app/web/mediafiles/;
     }

 }

#server {
#    listen 443 ssl;
#    server_name shashlikns.ru;
#
#    ssl_certificate /etc/letsencrypt/live/shashlikns.ru/fullchain.pem;
#    ssl_certificate_key /etc/letsencrypt/live/shashlikns.ru/privkey.pem;
#
#    access_log /var/log/nginx/access.log;
#    error_log /var/log/nginx/error.log;
#
#    location /static/ {
#         alias /home/app/web/staticfiles/;
#     }
#
#     location /media/ {
#         alias /home/app/web/mediafiles/;
#     }
#
#    location / {
#         proxy_pass http://config;
#         proxy_connect_timeout 180s;
#         proxy_read_timeout 180s;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header Host $http_host;
#         proxy_redirect off;
#         client_max_body_size 20M ;
#     }
#}

#server {
#    listen 80;
#    server_name shashlikns.ru;
#
#    location ~/.well-known/acme-challenge {
#        allow all;
#        root /var/www/certbot;
#    }
#
#    return 301 https://$host:$request_uri;
#}
